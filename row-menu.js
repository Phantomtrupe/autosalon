$.fn.rowMenu=function(f){return this.each(function(){function e(){var d=0,e=a.outerWidth();g.each(function(){var c=$(this),h=c.outerWidth(!0);d+=h;d+b.moreWidth>=e&&(c.attr("data-append",1),1>a.find("."+b.moreBtnClass).length&&(a.append('<li class="'+b.moreBtnClass+'"><a href="javascript:void(0);">'+b.moreText+'</a><ul class="'+b.moreContainerClass+'"></ul></li>'),a.find("."+b.moreBtnClass).insertBefore(a.find('[data-append="1"]').first())),a.find('[data-append="1"]').appendTo(a.find("."+b.moreContainerClass)));return d});
a.find("li").removeAttr("data-append");a.find("."+b.moreBtnClass).find("ul").parent().each(function(){var c=$(this),d=c.find(">ul");c.parents("ul");var e=!1;c.hover(function(){c.find(">a").addClass("active").removeClass("normal");for(i=a.find("."+b.moreBtnClass).find("ul").length;0<=i;i--)c.parent().find(">li").not(c).find("ul").eq(i).hide();e=!0;d.show();$(document).outerWidth()>$(window).outerWidth()&&c.find(">ul").addClass("row-right-level")},function(){c.find(">a").removeClass("active").addClass("normal");
e=!1;window.setTimeout(function(){e||(d.hide(),c.find(">ul").removeClass("row-right-level"))},b.moreHideTimeout)})})}var d,a=$(this),g=a.find(">li"),b=$.extend({moreText:"\u0415\u0449\u0435",moreWidth:100,resizeTimeout:10,moreHideTimeout:500,moreBtnClass:"row-menu-btn",moreContainerClass:"row-menu-container"},f);e();$(window).on("resize",function(){"undefined"!==d&&clearTimeout(d);d=setTimeout(function(){a.find("."+b.moreContainerClass).insertAfter(a.find("."+b.moreBtnClass));a.find("."+b.moreContainerClass+
"> li").unwrap();a.find("."+b.moreBtnClass).remove();e()},b.resizeTimeout)})})};